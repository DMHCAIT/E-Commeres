(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6287],{73164:function(e,t,r){Promise.resolve().then(r.bind(r,13538))},13538:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return I}});var s=r(57437),a=r(2265),i=r(30167),o=r(62869),l=r(35974),n=r(75183),c=r(48614),d=r(23628),m=r(91723),x=r(89345),g=r(48736),h=r(95805),p=r(16275),u=r(50091),f=r(33388),b=r(41671),y=r(13781),j=r(85954),v=r(90740),N=r(69076),w=r(82222),k=r(25846),S=r(29202),C=r(11239),Z=r(99397),z=r(32489),_=r(18930),T=r(28124),E=r(98728),M=r(74440),O=r(47416),D=r(89227),W=r(33276),P=r(83229),A=r(68919),R=r(42042);let L={triggers:[{id:"webhook",name:"Webhook",icon:d.Z,color:"from-blue-500 to-blue-600"},{id:"schedule",name:"Schedule",icon:m.Z,color:"from-green-500 to-green-600"},{id:"email",name:"Email Received",icon:x.Z,color:"from-purple-500 to-purple-600"},{id:"form",name:"Form Submit",icon:g.Z,color:"from-orange-500 to-orange-600"},{id:"crm",name:"CRM Event",icon:h.Z,color:"from-pink-500 to-pink-600"},{id:"ecommerce",name:"Order Created",icon:p.Z,color:"from-indigo-500 to-indigo-600"}],actions:[{id:"send_email",name:"Send Email",icon:x.Z,color:"from-red-500 to-red-600"},{id:"create_record",name:"Create Record",icon:u.Z,color:"from-teal-500 to-teal-600"},{id:"update_crm",name:"Update CRM",icon:h.Z,color:"from-blue-500 to-blue-600"},{id:"send_sms",name:"Send SMS",icon:f.Z,color:"from-green-500 to-green-600"},{id:"create_task",name:"Create Task",icon:b.Z,color:"from-purple-500 to-purple-600"},{id:"webhook_post",name:"Webhook POST",icon:d.Z,color:"from-orange-500 to-orange-600"}],logic:[{id:"condition",name:"Condition",icon:y.Z,color:"from-yellow-500 to-yellow-600"},{id:"delay",name:"Delay",icon:j.Z,color:"from-gray-500 to-gray-600"},{id:"filter",name:"Filter",icon:v.Z,color:"from-cyan-500 to-cyan-600"},{id:"loop",name:"Loop",icon:N.Z,color:"from-emerald-500 to-emerald-600"}],ai:[{id:"ai_classify",name:"AI Classify",icon:w.Z,color:"from-violet-500 to-violet-600"},{id:"ai_extract",name:"Extract Data",icon:k.Z,color:"from-rose-500 to-rose-600"},{id:"ai_generate",name:"Generate Text",icon:g.Z,color:"from-amber-500 to-amber-600"},{id:"ai_translate",name:"Translate",icon:S.Z,color:"from-sky-500 to-sky-600"}]},F=[{id:"1",type:"trigger",nodeType:"webhook",title:"Webhook Trigger",description:"Receives webhook from website form",x:100,y:100,config:{url:"https://api.example.com/webhook",method:"POST"}},{id:"2",type:"action",nodeType:"create_record",title:"Create Lead",description:"Create new lead in CRM",x:400,y:100,config:{system:"Salesforce",object:"Lead"}},{id:"3",type:"logic",nodeType:"condition",title:"Check Lead Score",description:"If lead score > 80",x:700,y:100,config:{field:"lead_score",operator:">",value:80}},{id:"4",type:"action",nodeType:"send_email",title:"Send Welcome Email",description:"High-priority lead email",x:1e3,y:50,config:{template:"high_priority_welcome",to:"{{lead.email}}"}},{id:"5",type:"action",nodeType:"create_task",title:"Create Follow-up Task",description:"Task for sales team",x:1e3,y:200,config:{assignee:"sales_team",priority:"high"}}],H=[{from:"1",to:"2"},{from:"2",to:"3"},{from:"3",to:"4",condition:"true"},{from:"3",to:"5",condition:"false"}];function I(){let[e,t]=(0,a.useState)(F),[r,d]=(0,a.useState)(H),[m,x]=(0,a.useState)(null),[g,h]=(0,a.useState)(null),[p,u]=(0,a.useState)(!1),[f,b]=(0,a.useState)({x:0,y:0}),[y,j]=(0,a.useState)({x:0,y:0}),[v,N]=(0,a.useState)(1),[w,k]=(0,a.useState)(!1),[S,I]=(0,a.useState)(!0),[Y,B]=(0,a.useState)(!0),[U,G]=(0,a.useState)("triggers"),V=(0,a.useRef)(null),[X,q]=(0,a.useState)(null),J=e=>{let{node:t,isSelected:r,onSelect:a,onDrag:i,onStartConnection:o}=e,l=Object.values(L).flat().find(e=>e.id===t.nodeType),c=(null==l?void 0:l.icon)||C.Z;return(0,s.jsx)(n.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},className:"absolute cursor-pointer select-none ".concat(r?"z-20":"z-10"),style:{left:t.x,top:t.y,transform:"scale(".concat(v,")")},onClick:()=>a(t),onMouseDown:e=>i(e,t),children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border-2 transition-all ".concat(r?"border-purple-500 shadow-purple-200":"border-gray-200 hover:border-gray-300"," min-w-[200px] max-w-[250px]"),children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r ".concat((null==l?void 0:l.color)||"from-gray-500 to-gray-600"," text-white p-3 rounded-t-xl flex items-center"),children:[(0,s.jsxs)("div",{className:"flex items-center flex-1",children:[(0,s.jsx)(c,{className:"w-5 h-5 mr-2"}),(0,s.jsx)("span",{className:"font-medium text-sm truncate",children:t.title})]}),(0,s.jsx)("div",{className:"flex items-center space-x-1",children:(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),o(t)},className:"w-6 h-6 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center",children:(0,s.jsx)(Z.Z,{className:"w-3 h-3"})})})]}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:t.description}),t.config&&(0,s.jsx)("div",{className:"space-y-1",children:Object.entries(t.config).slice(0,2).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,s.jsxs)("span",{className:"text-gray-500 capitalize",children:[t.replace("_"," "),":"]}),(0,s.jsx)("span",{className:"text-gray-700 truncate max-w-24",title:String(r),children:String(r)})]},t)})})]}),"trigger"!==t.type&&(0,s.jsx)("div",{className:"absolute -left-2 top-1/2 transform -translate-y-1/2 w-4 h-4 bg-gray-400 rounded-full border-2 border-white shadow"}),(0,s.jsx)("div",{className:"absolute -right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 bg-purple-500 rounded-full border-2 border-white shadow"})]})})},K=t=>{let{from:r,to:a,condition:i}=t,o=e.find(e=>e.id===r),l=e.find(e=>e.id===a);if(!o||!l)return null;let n=o.x+250,c=o.y+60,d=l.x,m=l.y+60,x="M ".concat(n," ").concat(c," C ").concat(n+50," ").concat(c,", ").concat(d-50," ").concat(m,", ").concat(d," ").concat(m);return(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:x,stroke:"true"===i?"#10b981":"false"===i?"#ef4444":"#8b5cf6",strokeWidth:"2",fill:"none",className:"drop-shadow-sm",markerEnd:"url(#arrowhead)"}),i&&(0,s.jsx)("text",{x:(n+d)/2,y:(c+m)/2-10,className:"fill-gray-600 text-xs font-medium",textAnchor:"middle",children:i})]})};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(i.Z,{}),(0,s.jsx)("div",{className:"fixed top-16 left-0 right-0 bg-white border-b border-gray-200 z-20",children:(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Workflow Builder"}),(0,s.jsx)(l.C,{variant:"secondary",children:"Draft"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)(o.z,{variant:"ghost",size:"sm",onClick:()=>I(!S),className:S?"bg-purple-100 text-purple-700":"",children:[(0,s.jsx)(Z.Z,{className:"w-4 h-4 mr-1"}),"Nodes"]}),(0,s.jsxs)(o.z,{variant:"ghost",size:"sm",onClick:()=>B(!Y),className:Y?"bg-purple-100 text-purple-700":"",children:[(0,s.jsx)(E.Z,{className:"w-4 h-4 mr-1"}),"Properties"]})]}),(0,s.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>N(Math.max(.5,v-.1)),children:(0,s.jsx)(M.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("span",{className:"text-sm text-gray-600 px-2",children:[Math.round(100*v),"%"]}),(0,s.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>N(Math.min(2,v+.1)),children:(0,s.jsx)(O.Z,{className:"w-4 h-4"})})]}),(0,s.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,s.jsxs)(o.z,{variant:"ghost",size:"sm",onClick:()=>k(!w),className:w?"text-red-600 hover:text-red-700":"text-green-600 hover:text-green-700",children:[w?(0,s.jsx)(D.Z,{className:"w-4 h-4 mr-1"}):(0,s.jsx)(W.Z,{className:"w-4 h-4 mr-1"}),w?"Stop":"Test"]}),(0,s.jsxs)(o.z,{variant:"ghost",size:"sm",children:[(0,s.jsx)(P.Z,{className:"w-4 h-4 mr-1"}),"Save"]}),(0,s.jsxs)(o.z,{size:"sm",className:"bg-purple-600 hover:bg-purple-700",children:[(0,s.jsx)(A.Z,{className:"w-4 h-4 mr-1"}),"Publish"]})]})]})}),(0,s.jsxs)("div",{className:"pt-32",children:[(0,s.jsx)(()=>{var r;return(0,s.jsx)(c.M,{children:S&&(0,s.jsx)(n.E.div,{initial:{x:-300},animate:{x:0},exit:{x:-300},className:"fixed left-0 top-16 bottom-0 w-80 bg-white border-r border-gray-200 shadow-lg z-30 overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Add Nodes"}),(0,s.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>I(!1),children:(0,s.jsx)(z.Z,{className:"w-4 h-4"})})]}),(0,s.jsx)("div",{className:"space-y-1 mb-6",children:Object.keys(L).map(e=>(0,s.jsx)("button",{onClick:()=>G(e),className:"w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat(U===e?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,s.jsx)("div",{className:"space-y-3",children:null===(r=L[U])||void 0===r?void 0:r.map(r=>(0,s.jsx)(n.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-gray-50 rounded-lg p-3 cursor-pointer hover:bg-gray-100 border border-gray-200",onClick:()=>{t([...e,{id:Date.now().toString(),type:"triggers"===U?"trigger":"logic"===U?"logic":"ai"===U?"ai":"action",nodeType:r.id,title:r.name,description:"New ".concat(r.name),x:200+200*Math.random(),y:200+200*Math.random(),config:{}}])},children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r ".concat(r.color," rounded-lg flex items-center justify-center mr-3"),children:(0,s.jsx)(r.icon,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-gray-900 text-sm",children:r.name}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["triggers"===U&&"Starts workflow","actions"===U&&"Performs action","logic"===U&&"Controls flow","ai"===U&&"AI-powered"]})]})]})},r.id))})]})})})},{}),(0,s.jsx)(()=>(0,s.jsx)(c.M,{children:Y&&(0,s.jsx)(n.E.div,{initial:{x:300},animate:{x:0},exit:{x:300},className:"fixed right-0 top-16 bottom-0 w-80 bg-white border-l border-gray-200 shadow-lg z-30 overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Properties"}),(0,s.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>B(!1),children:(0,s.jsx)(z.Z,{className:"w-4 h-4"})})]}),m?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Node Title"}),(0,s.jsx)("input",{type:"text",value:m.title,onChange:r=>{t(e.map(e=>e.id===m.id?{...e,title:r.target.value}:e)),x({...m,title:r.target.value})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,s.jsx)("textarea",{value:m.description,onChange:r=>{t(e.map(e=>e.id===m.id?{...e,description:r.target.value}:e)),x({...m,description:r.target.value})},rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"})]}),m.config&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Configuration"}),(0,s.jsx)("div",{className:"space-y-3",children:Object.entries(m.config).map(r=>{let[a,i]=r;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1 capitalize",children:a.replace("_"," ")}),(0,s.jsx)("input",{type:"text",value:String(i),onChange:r=>{let s={...m.config,[a]:r.target.value};t(e.map(e=>e.id===m.id?{...e,config:s}:e)),x({...m,config:s})},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-purple-500 focus:border-transparent"})]},a)})})]}),(0,s.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,s.jsxs)(o.z,{variant:"destructive",size:"sm",onClick:()=>{t(e.filter(e=>e.id!==m.id)),d(r.filter(e=>e.from!==m.id&&e.to!==m.id)),x(null)},className:"w-full",children:[(0,s.jsx)(_.Z,{className:"w-4 h-4 mr-2"}),"Delete Node"]})})]}):(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(T.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Select a node to edit its properties"})]})]})})}),{}),(0,s.jsxs)("div",{ref:V,className:"relative overflow-hidden bg-gray-50 min-h-screen transition-all ".concat(S?"ml-80":"ml-0"," ").concat(Y?"mr-80":"mr-0"),style:{backgroundImage:"\n              radial-gradient(circle at 1px 1px, rgba(0,0,0,0.1) 1px, transparent 0),\n              radial-gradient(circle at 20px 20px, rgba(0,0,0,0.05) 1px, transparent 0)\n            ",backgroundSize:"20px 20px, 40px 40px"},children:[(0,s.jsxs)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none z-5",children:[(0,s.jsx)("defs",{children:(0,s.jsx)("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",fill:"#8b5cf6",children:(0,s.jsx)("polygon",{points:"0 0, 10 3.5, 0 7"})})}),r.map((e,t)=>(0,s.jsx)(K,{from:e.from,to:e.to,condition:e.condition},t))]}),(0,s.jsx)("div",{className:"relative",children:e.map(e=>(0,s.jsx)(J,{node:e,isSelected:(null==m?void 0:m.id)===e.id,onSelect:x,onDrag:(e,t)=>{u(!0),h(t)},onStartConnection:e=>{console.log("Start connection from:",e.id)}},e.id))}),0===e.length&&(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center max-w-md",children:[(0,s.jsx)(R.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Start Building Your Workflow"}),(0,s.jsx)("p",{className:"text-gray-500 mb-6",children:"Drag nodes from the left panel to create your automation workflow"}),(0,s.jsxs)(o.z,{onClick:()=>I(!0),children:[(0,s.jsx)(Z.Z,{className:"w-4 h-4 mr-2"}),"Add Your First Node"]})]})}),(0,s.jsxs)("div",{className:"fixed bottom-6 right-6 w-48 h-32 bg-white rounded-lg border border-gray-200 shadow-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gray-100 px-3 py-2 border-b border-gray-200",children:(0,s.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Workflow Overview"})}),(0,s.jsx)("div",{className:"relative h-24 bg-gray-50",children:e.map(e=>(0,s.jsx)("div",{className:"absolute w-2 h-2 bg-purple-500 rounded-sm",style:{left:e.x/1500*180+4,top:e.y/800*80+4}},e.id))})]}),e.length>0&&(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed bottom-6 left-6 bg-white rounded-lg border border-gray-200 shadow-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-6 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),(0,s.jsxs)("span",{className:"text-gray-600",children:["Triggers: ",e.filter(e=>"trigger"===e.type).length]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),(0,s.jsxs)("span",{className:"text-gray-600",children:["Actions: ",e.filter(e=>"action"===e.type).length]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-2"}),(0,s.jsxs)("span",{className:"text-gray-600",children:["Logic: ",e.filter(e=>"logic"===e.type).length]})]})]})})]})]})]})}},35974:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var s=r(57437);r(2265);var a=r(90535),i=r(94508);let o=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)(o({variant:r}),t),...a})}}},function(e){e.O(0,[7648,5050,5183,548,1167,167,2971,2117,1744],function(){return e(e.s=73164)}),_N_E=e.O()}]);